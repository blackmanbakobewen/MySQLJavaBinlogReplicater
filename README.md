MySQLJavaBinlogReplicater
=========================

MySQLJavaBinlogReplicater


伪装MySQL从库，将MySQL主库Binlog日志内容暴露为REST风格Webservice，从而可以适配各种其他异构数据库进行同步。
借鉴了canal部分代码

-------------------------CXF REST演示
slaveId首次注册
http://localhost:8080/MySQLJavaBinlogReplicater/webservice/binlog/getToken.json?slaveId=111
返回
{"TokenAuthRes":{"msgDetail":"first visit,generate new token.","newToken":1384219423587,"resCode":"NEW_TOKEN"}}

第二次

http://localhost:8080/MySQLJavaBinlogReplicater/webservice/binlog/getDump.json?slaveId=111&tokenInput=1384221380644&binlogPosition=107&binlogfilename=mysql-bin.000001&serverPort=3306&serverhost=192.168.215.1&username=canal&password=canal
返回JSON
{"BinParseResultVO":{"errorMsgList":"","processMsgList":"","eventVOList":{"RotateLogEventVO":[{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000001","filename":"mysql-bin.000001","fileBeginPosition":4},{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000002","filename":"mysql-bin.000002","fileBeginPosition":4},{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000003","filename":"mysql-bin.000003","fileBeginPosition":4},{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000004","filename":"mysql-bin.000004","fileBeginPosition":4},{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000005","filename":"mysql-bin.000005","fileBeginPosition":4},{"logPos":150,"when":1384220108,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000006","filename":"mysql-bin.000006","fileBeginPosition":4},{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000006","filename":"mysql-bin.000006","fileBeginPosition":4},{"logPos":0,"when":0,"mysqlServerId":1,"eventTypeString":"Rotate","binlogFileName":"mysql-bin.000007","filename":"mysql-bin.000007","fileBeginPosition":4}],"FormatDescriptionLogEventVO":[{"logPos":107,"when":1384157490,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27},{"logPos":107,"when":1384173478,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27},{"logPos":107,"when":1384173480,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27},{"logPos":107,"when":1384219102,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27},{"logPos":107,"when":1384219104,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27},{"logPos":107,"when":1384220108,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27},{"logPos":107,"when":1384257398,"mysqlServerId":1,"eventTypeString":"Format_desc","binlogVersion":4,"serverVersion":"5.5.34-0ubuntu0.12.04.1-log","numberOfEventTypes":27}],"StopLogEventVO":[{"logPos":126,"when":1384163134,"mysqlServerId":1,"eventTypeString":"Stop"},{"logPos":126,"when":1384173478,"mysqlServerId":1,"eventTypeString":"Stop"},{"logPos":126,"when":1384209681,"mysqlServerId":1,"eventTypeString":"Stop"},{"logPos":126,"when":1384219102,"mysqlServerId":1,"eventTypeString":"Stop"},{"logPos":314,"when":1384249495,"mysqlServerId":1,"eventTypeString":"Stop"}],"QueryLogEventVO":{"logPos":175,"when":1384236693,"mysqlServerId":1,"eventTypeString":"Query","query":"BEGIN","catalog":"std","dbname":"test"},"TableMapLogEventVO":{"logPos":228,"when":1384236691,"mysqlServerId":1,"eventTypeString":"Table_map","dbname":"test","tblname":"log4j","tableId":41,"columnCnt":4},"RowEventVO":{"logPos":268,"when":1384236691,"mysqlServerId":1,"eventTypeString":"Write_rows_v1","columnLen":4,"rowDMLType":"INSERT","beforeColumnInfoList":"","afterColumnInfoList":{"columnInfoValue":[{"columnName":"id","isPrimaryKey":true,"index":0,"isNull":false,"isBinary":false,"javaType":4,"value":5,"isAfter":true},{"columnName":"Message","isPrimaryKey":false,"index":1,"isNull":false,"isBinary":false,"javaType":12,"value":"a","isAfter":true},{"columnName":"CODE","isPrimaryKey":false,"index":2,"isNull":false,"isBinary":false,"javaType":12,"value":"a","isAfter":true},{"columnName":"LEVEL","isPrimaryKey":false,"index":3,"isNull":false,"isBinary":false,"javaType":12,"value":"c","isAfter":true}]}},"XidLogEventVO":{"logPos":295,"when":1384236693,"mysqlServerId":1,"eventTypeString":"Xid","xid":295}},"binlogfilename":"mysql-bin.000007","binlogPosition":107}}

-------------------------JAVA演示
运行BinlogParser类
